<h2>Manage Employees</h2>

<table border="2" width="100%">
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Role</th>
        <th>Designation</th>
        <th>Salary</th>
        <th>Actions</th>
    </tr>
    <% @employees.each do |employee| %>
        <tr>
          <td><%= employee.name %></td>
          <td><%= employee.user&.email || "N/A" %></td>  
          <td><%= employee.user&.role || "N/A" %></td>   
          <td><%= employee.designation %></td>
          <td><%= employee.salary&.amount %></td> 
          <td>
            <%= link_to "Edit", edit_employee_path(employee), class: "button" %>
            <%= button_to "Delete", employee_path(employee), method: :delete %>
          </td>
        </tr>
    <% end %>      
</table>

<h3>Add New Employee</h3>
<%= form_with(model: Employee.new, local: true, url: employees_path) do |f| %>
  <p><%= f.label :name %><br><%= f.text_field :name %></p>
  <p><%= f.label :email %><br><%= f.email_field :email %></p>
  <p><%= f.label :designation %><br><%= f.text_field :designation %></p>
  <p><%= f.label :salary %><br><%= f.number_field :salary %></p>
  

  <p><%= f.label :role %><br><%= f.select :role, ["employee", "admin"] %></p>
  <p><%= f.submit "Add Employee", class: "button" %></p>
<% end %>


